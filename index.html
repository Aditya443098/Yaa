
// SISTEM UPDATE GITHUB PAGES - SINGKAT & BERFUNGSI
const APP_VERSION = "1.3";
const VERSION_KEY = "ttt_version";

// Cek update saat load
function checkUpdate() {
    const savedVersion = localStorage.getItem(VERSION_KEY);
    
    if (savedVersion !== APP_VERSION) {
        console.log(`ðŸ”„ Update v${savedVersion} â†’ v${APP_VERSION}`);
        
        // Simpan data user sebelum reset
        const users = localStorage.getItem('ttt_users');
        const currentUser = localStorage.getItem('current_user');
        
        // Reset localStorage kecuali data user
        localStorage.clear();
        
        // Kembalikan data user
        if (users) localStorage.setItem('ttt_users', users);
        if (currentUser) localStorage.setItem('current_user', currentUser);
        
        // Simpan versi baru
        localStorage.setItem(VERSION_KEY, APP_VERSION);
        
        // Reload untuk apply update
        setTimeout(() => location.reload(), 1000);
    }
    
    // Tampilkan versi di UI
    document.querySelectorAll('.version').forEach(el => {
        el.textContent = `v${APP_VERSION}`;
    });
}

// Auto-check update setiap 10 menit
setInterval(checkUpdate, 600000);

// Panggil saat load
window.addEventListener('load', checkUpdate);
